command pickaxe:
	aliases: pick, paxe
	trigger:
		if inventory of player contains pickaxe:
			stop
		else:
			give player unbreakable wooden pickaxe named "&7T1 Pickaxe" with nbt "{HideFlags:5}"

on right click:
	if player is sneaking:
		if player's tool is pickaxe:
			create a gui with virtual chest inventory with 4 rows named "&6&lPickaxe Upgrades":
				make gui all integers between 0 and 36 with black glass pane named "&f"
				make gui 16 with sunflower named "&eTokens: &6%format({token::%player's uuid%})%"
				make gui 10 with glowing book named "&6+1 Efficiency" with lore "&7Cost: 300 Tokens" and "&7Max: INF":
					if {token::%player's uuid%} >= 300:
						remove 300 from {token::%player's uuid%}
						if level of efficiency of player's tool >= 1:
							set {_lore::*} to lore of player's tool
							enchant player's tool with "efficiency %(level of efficiency of player's tool + 1)%" parsed as enchantment type
							remove "&7- Efficiency %(level of efficiency of player's tool - 1)%" from {_lore::*}
							add "&7- Efficiency %level of efficiency of player's tool%" to {_lore::*}
							set lore of player's tool to {_lore::*}
						else:
							set {_lore::*} to lore of player's tool
							enchant player's tool with efficiency 1
							if {_lore::*} doesn't contain "&6&lENCHANTMENTS":
								add "%nl%&6&lENCHANTMENTS" to {_lore::*}
							add "&7- Efficiency 1" to {_lore::*}
							set lore of player's tool to {_lore::*}
				
				make gui 11 with glowing book named "&6+1 Token Finder" with lore "&7Cost: 1K Tokens" and "&7Max: 10":
					if player's tool is not iron pickaxe or diamond pickaxe or netherite pickaxe:
						send "&cDo not try to glitch this."
						stop
					if {token::%player's uuid%} >= 1000:
						set {_lore::*} to lore of player's tool
						if {_lore::*} contains "&7- Token Finder 10":
							message "&6&lPizzaGenz &eToken Finder is maxed."
							stop
						if {_lore::*} doesn't contain "&7- Token Finder 1" or "&7- Token Finder 2" or "&7- Token Finder 3" or "&7- Token Finder 4" or "&7- Token Finder 5" or "&7- Token Finder 6" or "&7- Token Finder 7" or "&7- Token Finder 8" or "&7- Token Finder 9" or "&7- Token Finder 10":
							remove 1000 from {token::%player's uuid%}
							if player's tool isn't enchanted:
								add "{Enchantments:[{id:lure}]}" to nbt of player's tool
							if {_lore::*} doesn't contain "&6&lENCHANTMENTS":
								add "%nl%&6&lENCHANTMENTS" to {_lore::*}
							add "&7- Token Finder 1" to {_lore::*}
							set lore of player's tool to {_lore::*}
						else:
							loop {_lore::*}:
								if loop-value contains "&7- Token Finder":
									set {_loopvalue} to loop-value
									replace "&7- Token Finder " or "&7- Token Finder" with "" in {_loopvalue}
									if {_loopvalue} is "":
										if {token::%player's uuid%} >= 1000:
											remove 1000 from {token::%player's uuid%}
											set {_loopvalue} to "&7- Token Finder 2"
											remove "&7- Token Finder" from {_lore::*}
											add "&7- Token Finder 2" to {_lore::*}
											set lore of player's tool to {_lore::*}
									else:
										set {_loopvalue} to "%{_loopvalue}%" parsed as integer
										if {token::%player's uuid%} >= 1000:
											remove 1000 from {token::%player's uuid%}
											send "&aUpgraded from &7Token Finder %{_loopvalue}% &ato &7Token Finder %{_loopvalue}+1%"
											remove "&7- Token Finder %{_loopvalue}%" from {_lore::*}
											add "&7- Token Finder %{_loopvalue}+1%" to {_lore::*}
											set lore of player's tool to {_lore::*}
					else:
						message "&6&lPizzaGenz &eYou cannot afford Token Finder."
						stop
			
				if player's tool is not iron pickaxe or netherite pickaxe or diamond pickaxe:
					make gui 11 with glowing barrier named "&6+1 Token Finder &7(&4&lLOCKED&7)" with lore "&cYou cannot use this yet! &7You need to have a &fIron+ &8(&7Tier 3&8) &7Pickaxe!"
							
			
			
				make gui 12 with glowing book named "&6+1 Ore Blast" with lore "&7Cost: 5K Tokens" and "&7Max: 10":
					if player's tool is not diamond pickaxe or netherite pickaxe:
						send "&cDo not try to glitch this."
						stop
					if {token::%player's uuid%} >= 5000:
						set {_lore::*} to lore of player's tool
						if {_lore::*} contains "&7- Ore Blast 10":
							message "&6&lPizzaGenz &eOre Blast is maxed."
							stop
						if {_lore::*} doesn't contain "&7- Ore Blast 1" or "&7- Ore Blast 2" or "&7- Ore Blast 3" or "&7- Ore Blast 4" or "&7- Ore Blast 5" or "&7- Ore Blast 6" or "&7- Ore Blast 7" or "&7- Ore Blast 8" or "&7- Ore Blast 9" or "&7- Ore Blast 10":
							remove 5000 from {token::%player's uuid%}
							if player's tool isn't enchanted:
								add "{Enchantments:[{id:lure}]}" to nbt of player's tool
							if {_lore::*} doesn't contain "&6&lENCHANTMENTS":
								add "%nl%&6&lENCHANTMENTS" to {_lore::*}
							add "&7- Ore Blast 1" to {_lore::*}
							set lore of player's tool to {_lore::*}
						else:
							loop {_lore::*}:
								if loop-value contains "&7- Ore Blast":
									set {_loopvalue} to loop-value
									replace "&7- Ore Blast " or "&7- Ore Blast" with "" in {_loopvalue}
									if {_loopvalue} is "":
										if {token::%player's uuid%} >= 5000:
											remove 5000 from {token::%player's uuid%}
											set {_loopvalue} to "&7- Ore Blast 2"
											remove "&7- Ore Blast" from {_lore::*}
											add "&7- Ore Blast 2" to {_lore::*}
											set lore of player's tool to {_lore::*}
									else:
										set {_loopvalue} to "%{_loopvalue}%" parsed as integer
										if {token::%player's uuid%} >= 5000:
											remove 5000 from {token::%player's uuid%}
											send "&aUpgraded from &7Ore Blast %{_loopvalue}% &ato &7Ore Blast %{_loopvalue}+1%"
											remove "&7- Ore Blast %{_loopvalue}%" from {_lore::*}
											add "&7- Ore Blast %{_loopvalue}+1%" to {_lore::*}
											set lore of player's tool to {_lore::*}
					else:
						message "&6&lPizzaGenz &eYou cannot afford Ore Blast."
						stop
				
				if player's tool is not netherite pickaxe or diamond pickaxe:
					make gui 12 with glowing barrier named "&6+1 Ore Blast &7(&4&lLOCKED&7)" with lore "&cYou cannot use this yet! &7You need to have a &bDiamond+ &8(&7Tier 4&8) &7Pickaxe!"
						
						
						
				make gui 19 with glowing book named "&6+1 Crate Hunter" with lore "&7Cost: 25K Tokens" and "&7Max: 25":
					if player's tool is not netherite pickaxe:
						send "&cDo not try to glitch this."
						stop
					if {token::%player's uuid%} >= 25000:
						set {_lore::*} to lore of player's tool
						if {_lore::*} contains "&7- Crate Hunter 25":
							message "&6&lPizzaGenz &eCrate Hunter is maxed."
							stop
						if {_lore::*} doesn't contain "&7- Crate Hunter 1" or "&7- Crate Hunter 2" or "&7- Crate Hunter 3" or "&7- Crate Hunter 4" or "&7- Crate Hunter 5" or "&7- Crate Hunter 6" or "&7- Crate Hunter 7" or "&7- Crate Hunter 8" or "&7- Crate Hunter 9" or "&7- Crate Hunter 10" or "&7- Crate Hunter 11" or "&7- Crate Hunter 12" or "&7- Crate Hunter 13" or "&7- Crate Hunter 14" or "&7- Crate Hunter 15" or "&7- Crate Hunter 16" or "&7- Crate Hunter 17" or "&7- Crate Hunter 18" or "&7- Crate Hunter 19" or "&7- Crate Hunter 20" or "&7- Crate Hunter 21" or "&7- Crate Hunter 22" or "&7- Crate Hunter 23" or "&7- Crate Hunter 24" or "&7- Crate Hunter 25":
							remove 25000 from {token::%player's uuid%}
							if player's tool isn't enchanted:
								add "{Enchantments:[{id:lure}]}" to nbt of player's tool
							if {_lore::*} doesn't contain "&6&lENCHANTMENTS":
								add "%nl%&6&lENCHANTMENTS" to {_lore::*}
							add "&7- Crate Hunter 1" to {_lore::*}
							set lore of player's tool to {_lore::*}
						else:
							loop {_lore::*}:
								if loop-value contains "&7- Crate Hunter":
									set {_loopvalue} to loop-value
									replace "&7- Crate Hunter " or "&7- Crate Hunter" with "" in {_loopvalue}
									if {_loopvalue} is "":
										if {token::%player's uuid%} >= 25000:
											remove 25000 from {token::%player's uuid%}
											set {_loopvalue} to "&7- Crate Hunter 2"
											remove "&7- Crate Hunter" from {_lore::*}
											add "&7- Crate Hunter 2" to {_lore::*}
											set lore of player's tool to {_lore::*}
									else:
										set {_loopvalue} to "%{_loopvalue}%" parsed as integer
										if {token::%player's uuid%} >= 25000:
											remove 25000 from {token::%player's uuid%}
											send "&aUpgraded from &7Crate Hunter %{_loopvalue}% &ato &7Crate Hunter %{_loopvalue}+1%"
											remove "&7- Crate Hunter %{_loopvalue}%" from {_lore::*}
											add "&7- Crate Hunter %{_loopvalue}+1%" to {_lore::*}
											set lore of player's tool to {_lore::*}
					else:
						message "&6&lPizzaGenz &eYou cannot afford Crate Hunter."
						stop	
						
				if player's tool is not netherite pickaxe:
					make gui 19 with glowing barrier named "&6+1 Crate Hunter &7(&4&lLOCKED&7)" with lore "&cYou cannot use this yet! &7You need to have a &cNetherite &8(&7Tier MAX&8) &7Pickaxe!"
						
						
						
						
						
						
						
						
						
						
						
						
						
						
				make gui 20 with glowing oak sign named "&c&lMore Enchantments coming soon"
				make gui 15 with paper named "&bPrestige your Pickaxe!" with lore "&4Warning: This will reset your enchants." and "&cCost: 1000 Tokens & 10 Efficiency":
					if {token::%player's uuid%} >= 1000:
						if player's tool is netherite pickaxe:
							send "&6&lPizzaGenz &eYou have maxed your prestige for your pickaxe."
							stop
						remove 1000 from {token::%player's uuid%}
						send "&aYou have prestiged your pickaxe!"
					else:
						send "&cYou cannot afford this!"
						stop
					set {_e} to level of efficiency of player's tool
					if {_e} >= 10:
						close player's inventory
						if player's tool is wooden pickaxe:
							remove player's tool from player's inventory
							give player unbreakable stone pickaxe named "&7T2 Pickaxe" with nbt "{HideFlags:5}"
						else if player's tool is stone pickaxe:
							remove player's tool from player's inventory
							give player unbreakable iron pickaxe named "&7T3 Pickaxe" with nbt "{HideFlags:5}"
							send "&6You have unlocked &e&lTOKEN FINDER &6for your pickaxe."
						else if player's tool is iron pickaxe:
							remove player's tool from player's inventory
							give player unbreakable diamond pickaxe named "&7T4 Pickaxe" with nbt "{HideFlags:5}"
							send "&bYou have unlocked &9&lORE BLAST &bfor your pickaxe."
						else if player's tool is diamond pickaxe:
							remove player's tool from player's inventory
							give player unbreakable netherite pickaxe named "&7T5 Pickaxe" with nbt "{HideFlags:5}"
							send "&cYou have unlocked &4&lCRATE HUNTER &cfor your pickaxe."
							
						else if player's tool is any pickaxe:
							send "&6&lPizzaGenz &eYou cannot prestige this tool."
					else:
						send "&6&lPizzaGenz &eYou do not have the required enchants to prestige your pickaxe"
			open last gui to player


on mine:
	if world of player is "cave":
		if "%lore of player's tool%" contains "&7- Token Finder":
			loop 10 times:
				if "%lore of player's tool%" contains "&7- Token Finder %loop-value%":
					set {_l} to loop-value
					event-block is any ore
					chance of (0.1*{_l})%:
						if lore of player's tool contains "&7- Token Finder 1":
							set {_i} to random integer between 25 and 50
						if lore of player's tool contains "&7- Token Finder 2":
							set {_i} to random integer between 50 and 75
						if lore of player's tool contains "&7- Token Finder 3":
							set {_i} to random integer between 75 and 100
						if lore of player's tool contains "&7- Token Finder 4":
							set {_i} to random integer between 100 and 125
						if lore of player's tool contains "&7- Token Finder 5":
							set {_i} to random integer between 125 and 150
						if lore of player's tool contains "&7- Token Finder 6":
							set {_i} to random integer between 150 and 175
						if lore of player's tool contains "&7- Token Finder 7":
							set {_i} to random integer between 175 and 200
						if lore of player's tool contains "&7- Token Finder 8":
							set {_i} to random integer between 200 and 225
						if lore of player's tool contains "&7- Token Finder 9":
							set {_i} to random integer between 225 and 250
						if lore of player's tool contains "&7- Token Finder 10":
							set {_i} to random integer between 250 and 300
						send "&6&lToken Finder &efound you &6&l%{_i}% TOKENS!"
						set {_total} to {_i}
						add {_total} to {token::%player's uuid%}
		if "%lore of player's tool%" contains "&7- Ore Blast":
			event-block is any ore
			set {_diamond} to 20
			set {_ancient} to 30
			set {_gold} to 5
			set {_coal} to 2
			set {_iron} to 10
			chance of 2.5%:
				loop 10 times:
					if lore of player's tool contains "&7- Ore Blast %loop-value%":
						loop blocks in radius 5 of event-block:
							set {_bruh} to loop-value-1
							if loop-block is diamond ore:
								add {_diamond}*(0.2*{_bruh}) to {_total}
							if loop-block is ancient debris:
								add {_ancient}*(0.2*{_bruh}) to {_total}
							if loop-block is gold ore:
								add {_gold}*(0.2*{_bruh}) to {_total}
							if loop-block is iron ore:
								add {_iron}*(0.2*{_bruh}) to {_total}
							if loop-block is coal ore:
								add {_coal}*(0.2*{_bruh}) to {_total}
				if {_total} is set:
					send "&6&lOre Blast &eprocced and gave you &6&l%{_total}% TOKENS!"
					add {_total} to {token::%player's uuid%}
		
		if "%lore of player's tool%" contains "&7- Crate Hunter":
			event-block is any ore
			cancel event
			loop 25 times:
				if lore of player's tool contains "&7- Crate Hunter %loop-value%":
					set {_l} to loop-value
					chance of (0.025*{_l})%:
						chance of 0.4%:
							broadcast "&6&lCrate Hunter &efound %player% a &6&lLEGENDARY CRATE!"
							send "&6&lCrate Hunter &ehas caught you a &6&lLEGENDARY CRATE!"
							give player 1 of glowing ender chest named "&7Crate &8(&6&lLEGENDARY&8)"
							stop
						chance of 3%:
							broadcast "&6&lCrate Hunter &efound %player% a &5&lEPIC CRATE!"
							send "&6&lCrate Hunter &ehas caught you a &5&lEPIC CRATE!"
							give player 1 of glowing ender chest named "&7Crate &8(&5&lEPIC&8)"
							stop
						chance of 10%:
							send "&6&lCrate Hunter &ehas caught you a &9&lRARE CRATE!"
							give player 1 of glowing chest named "&7Crate &8(&9&lRARE&8)"
							stop
						chance of 25%:
							send "&6&lCrate Hunter &ehas caught you a &b&lADVANCED CRATE!"
							give player 1 of glowing chest named "&7Crate &8(&b&lADVANCED&8)"
							stop
						chance of 100%:
							send "&6&lCrate Hunter &ehas caught you a &7&lBASIC CRATE!"
							give player 1 of glowing chest named "&7Crate &8(&7&lBASIC&8)"
							stop
				
		
		if event-block is stone or cobblestone or mossy cobblestone:
			add 1 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to gray concrete
			wait 5 seconds
			set event-block to stone or cobblestone or mossy cobblestone
		if event-block is end stone:
			add 1 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to white terracotta
			wait 5 seconds
			set event-block to end stone
		if event-block is netherrack:
			add 1 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to red concrete
			wait 5 seconds
			set event-block to netherrack
            
		if event-block is red mushroom:
			cancel event
			set event-block to red mushroom
            
		if event-block is brown mushroom:
			cancel event
			set event-block to brown mushroom
			
		if event-block is vines:
			cancel event
			set event-block to vines
            
		if event-block is nether gold ore:
			add 10 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to red concrete
			wait 5 seconds
			set event-block to nether gold ore
		
		if event-block is quartz ore:
			add 7 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to white concrete
			wait 5 seconds
			set event-block to quartz ore
			
		else if event-block is coal ore:
			Quest(player, 10, "Coal1", 100, "Coal")
			Quest(player, 50, "Coal2", 200, "Coal")
			Quest(player, 200, "Coal3", 500, "Coal")
			Quest(player, 500, "Coal4", 1000, "Coal")
			add 2 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to black concrete
			wait 5 seconds
			set event-block to coal ore
		
		else if event-block is iron ore:
			Quest(player, 10, "Iron1", 100, "Iron")
			Quest(player, 50, "Iron2", 200, "Iron")
			Quest(player, 200, "Iron3", 500, "Iron")
			Quest(player, 500, "Iron4", 1000, "Iron")
			add 10 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to white terracotta
			wait 5 seconds
			set event-block to iron ore

		else if event-block is gold ore:
			Quest(player, 10, "Gold1", 100, "Gold")
			Quest(player, 50, "Gold2", 200, "Gold")
			Quest(player, 200, "Gold3", 500, "Gold")
			Quest(player, 500, "Gold4", 1000, "Gold")
			add 5 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to yellow concrete
			wait 5 seconds
			set event-block to gold ore

		else if event-block is diamond ore:
			Quest(player, 10, "Dia1", 100, "Diamond")
			Quest(player, 50, "Dia2", 200, "Diamond")
			Quest(player, 200, "Dia3", 500, "Diamond")
			Quest(player, 500, "Dia4", 1000, "Diamond")
			add 20 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to cyan concrete
			wait 5 seconds
			set event-block to diamond ore
		
		else if event-block is diamond block:
			add 25 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to cyan concrete
			wait 5 seconds
			set event-block to diamond block

		else if event-block is ancient debris:
			Quest(player, 10, "Netherite1", 100, "Netherite")
			Quest(player, 50, "Netherite2", 200, "Netherite")
			Quest(player, 200, "Netherite3", 500, "Netherite")
			Quest(player, 500, "Netherite4", 1000, "Netherite")
			add 30 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to brown concrete
			wait 5 seconds
			set event-block to ancient debris
		
		else if event-block is redstone ore:
			add 5 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to red concrete
			wait 5 seconds
			set event-block to redstone ore
		
		else if event-block is lapis ore:
			add 10 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to blue concrete
			wait 5 seconds
			set event-block to lapis ore
			
		else if event-block is emerald ore:
			add 15 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to green concrete
			wait 5 seconds
			set event-block to emerald ore
		else if event-block is basalt:
			add 5 to {token::%player's uuid%} and {_t}
			send action bar "&6+%{_t}% Tokens" to player
			cancel event
			set event-block to gray concrete
			wait 5 seconds
			set event-block to basalt

		if event-block is red concrete or fence or lantern or netherrack or concrete or white terracotta:
			cancel event

on break:
	if world of player is "cave":
		if player has permission "admin.break":
		else:
			cancel event
		
on place:
	if world of player is "cave":
		if player has permission "admin.break":
		else:
			cancel event
			
on right click:
	if event-block is trapdoor or door or ladder:
		if world of player is "cave":
			if player has permission "admin.use":
			else:
				cancel event
		
